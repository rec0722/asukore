function TimePicker(){var e=moment(),t={zone:"Asia/Tokyo",year:e.year(),month:e.month(),day:e.day(),hour:e.hour(),minute:0,second:0},n=moment().set(t);$(".js-time-picker").each((function(){var e=$(this).attr("id");new Picker(document.getElementById(e),{format:"HH:mm",controls:!0,headers:!0,date:new Date(n),increment:{minute:10},text:{title:"<span>時間を選択してください</span>"}})}))}$((function(){$(document).on("click",".inputType",(function(e){let t=e.target.name;if("input_free"===t)var n=$("#free-box");else if("input_time"===t)n=$("#time-box");else if("input_pic"===t)n=$("#pic-box");!0===e.target.checked?n.css({display:"block"}):n.css({display:"none"})})),$(document).on("click",".addItem",(function(){let e=document.getElementById("getItemNum").value,t=$("#tableAction tbody").find("tr:last").clone(!0);t.find(".id input:hidden").attr("name","action_list["+e+"][id]").val(""),t.find(".input1 input").attr("name","action_list["+e+"][time1]"),t.find(".input1 input").attr("id","time1_"+e).val(""),t.find(".input2 input").attr("name","action_list["+e+"][time2]"),t.find(".input2 input").attr("id","time2_"+e).val(""),t.find(".input3 input").attr("name","action_list["+e+"][customer]").val(""),t.find(".input4 textarea").attr("name","action_list["+e+"][action]").css({height:"none"}).val(""),t.find(".input5 textarea").attr("name","action_list["+e+"][approach]").css({height:"none"}).val(""),t.find(".button input").attr("name","action_list["+e+"][delete_flg]"),t.find(".button input").attr("id","flg"+e).val(""),t.find(".button button").attr("id",e),t.appendTo("#tableAction tbody"),$("#tableAction").children("tbody").children("tr").eq(e).css({display:"flex"}),e++,document.getElementById("getItemNum").value=e})),$(document).on("click",".deleteItem",(function(e){if("1"!==document.getElementById("getItemNum").value){const e=$(this).attr("id");$("#tableAction").children("tbody").children("tr").eq(e).css({display:"none"}),document.getElementById("flg"+e).value="1"}})),$(document).on("click",".deleteImg",(function(e){let t=e.target.parentNode.id;""!==t&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:"/delete-img",dataType:"json",data:{id:t}}).done((function(e){$("#block"+t).remove(),alert("画像を削除しました。")})).fail((e=>{console.log(e.statusText)})))}))})),$((function(){$(document).on("change","#select-company",(function(){let e=document.getElementById("select-company").value;""!==e&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:"/get_dept",dataType:"json",data:{company_id:e}}).done((function(e){let t=document.getElementById("change-dept");if(t.hasChildNodes())for(;t.childNodes.length>0;)t.removeChild(t.firstChild);$.each(e,(function(e,n){let i=n.id,a=n.name;var o=document.createElement("option");o.value=i,o.text=a,t.appendChild(o)}))})).fail((e=>{console.log(e.statusText)})))})),$(document).on("click",".select-role",(function(){let e=$(".select-role:checked").val(),t=document.getElementById("userDept");"8"===e?$(t).removeClass("display-none"):$(t).addClass("display-none")})),$(document).on("click",".mstType",(function(e){let t=e.target.name;if("input_free"===t)e.tar;else if("input_time"===t)var n=$("#time-box");else if("input_pic"===t)n=$("#pic-box");!0===e.target.checked?n.css({display:"block"}):n.css({display:"none"}),console.log(n)}))})),$((function(){$("select").formSelect(),$(".dropdown-trigger").dropdown({coverTrigger:!1}),$(".sidenav").sidenav(),$(".datepicker").datepicker({autoClose:!0,defaultDate:null,format:"yyyy-mm-dd",firstDay:1,onSelect:!0,showMonthAfterYear:!0,i18n:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],weekdays:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],weekdaysAbbrev:["日","月","火","水","木","金","土"]}})})),$(document).on("click",".js-time-picker",(function(){new TimePicker})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("calendar");new FullCalendar.Calendar(e,{schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",businessHours:!0,buttonText:{today:"今月"},editable:!0,height:"auto",initialView:"dayGridMonth",locale:"ja",timeZone:"Asia/Tokyo",selectable:!1,dateClick:function(e){document.getElementById("report_date").value=e.dateStr,document.forms.dashboard.submit()}}).render()}));
